<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.54">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #001076}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #4d4d4d}
span.s1 {color: #001076}
span.s2 {color: #000000}
span.s3 {color: #1d1d1d}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1">MxDrawer</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3">The drawer is a repository of items that are possible to insert into an Mx.</p>
<p class="p3">Its a pallette</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3">// if you have not yet loaded all Instr into memory then do so</p>
<p class="p3"><span class="s1">Instr</span>.loadAll;</p>
<p class="p2"><br></p>
<p class="p3">// its the thing on the right</p>
<p class="p3">(</p>
<p class="p2"><br></p>
<p class="p3">m = <span class="s1">Mx</span>.new;</p>
<p class="p2"><br></p>
<p class="p3">m.gui(nil,Rect(100,100,900,600));</p>
<p class="p2"><br></p>
<p class="p3">)<span class="Apple-tab-span">	</span></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><span class="s2">drivers/</span>registerDrawerItems.scd contains code that registers default items</p>
<p class="p2"><br></p>
<p class="p3">Simplest is to add an item with a string and a function that will create the item:</p>
<p class="p2"><br></p>
<p class="p1">MxDrawer<span class="s2">.add(</span><span class="s3">"Slider"</span><span class="s2">,{ </span>NumberEditor<span class="s2">.new });</span></p>
<p class="p2"><br></p>
<p class="p3">A group is represented by a top level item which can be double-clicked on to drill down to its items.</p>
<p class="p3">Instr</p>
<p class="p2"><br></p>
<p class="p3"><span class="s1">MxDrawer</span>.addGroup(<span class="s3">"Instr"</span>,</p>
<p class="p3">// itemsFunc: returns a large array of [ [name, dataObject], [name, dataObject], ... ]</p>
<p class="p3">// where the dataObject may be anything you wish</p>
<p class="p3">{ <span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="s1">Instr</span>.leaves.collect { <span class="s1">arg</span> instr; [instr.dotNotation ,instr] }</p>
<p class="p3">},</p>
<p class="p3">// buildItemFunc : given the dataObject and the title as selected from the list, return the item</p>
<p class="p3">{ <span class="s1">arg</span> dataObject,i,instrname;</p>
<p class="p3"><span class="Apple-tab-span">	</span>// in this case I chose to simply pass the Instr as dataObject so that is what I return</p>
<p class="p3"><span class="Apple-tab-span">	</span>dataObject</p>
<p class="p3">});</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3">You may add additional files that contain registration code.<span class="Apple-converted-space">  </span>This should be done in your startup file, in an *initClass method or when you first start working. It should be done before any code has used the MxDrawer.</p>
<p class="p2"><br></p>
<p class="p3">// in my personal use quark "felix" I have a file called drawerRegistrations.scd</p>
<p class="p3">MxDrawer.addRegistrationFile( Quark.find("felix").localPath +/+ "drawerRegistrations.scd" );</p>
<p class="p2"><br></p>
<p class="p3">// path matching works</p>
<p class="p3">MxDrawer.addRegistrationFile( "~/sc3docs/drawers/*.scd" )</p>
<p class="p2"><br></p>
<p class="p3">But you may also just execute your file manually in order to add your registrations.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3">drawer registration:</p>
<p class="p3"><span class="Apple-tab-span">	</span>its not necc class based, so don't tie it into the driver</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>use a class array of files</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>do a first use load of those</p>
<p class="p3"><span class="Apple-tab-span">	</span>or run explicitly to reload</p>
<p class="p3"><span class="Apple-tab-span">	</span>or run one file to load that</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
</body>
</html>
